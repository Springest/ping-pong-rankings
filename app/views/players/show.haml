- content_for :title, @player.name
.row
  .span9
    %h3 Rating History
    #rating_chart.span9{ :style => 'height: 350px;' }
    - line_graph 'rating_chart', @player.rating_histories.map(&:rating)

.row
  .span9
    %h3 Games Played
    %table.table.table-striped
      %tbody
        - @player.games.order('created_at desc').where(:created_at => 30.days.ago..Time.now).each do |game|
          %tr
            - if game.winners.include? @player
              %td.span1
                %span.label.label-success.pull-right WON
              %td.span1
                = "#{game.winning_score}-#{game.losing_score}"
              %td
                - if game.winners.count > 1
                  - teammate = (game.winners - [@player]).first
                  = "with #{link_to teammate.name, teammate}".html_safe
                = "against"
                = "#{game.losers.map{|player| link_to(player.name, player)}.to_sentence}".html_safe
            - else
              %td.span1
                %span.label.label.pull-right LOST
              %td.span1
                = "#{game.losing_score}-#{game.winning_score}"
              %td
                - if game.losers.count > 1
                  - teammate = (game.losers - [@player]).first
                  = "with #{link_to teammate.name, teammate}".html_safe
                = "against"
                = "#{game.winners.map{|player| link_to(player.name, player)}.to_sentence}".html_safe

.row
  .span1
    = link_to('Edit '.html_safe << content_tag(:i, '', :class => 'icon-pencil'), edit_player_path(@player))
